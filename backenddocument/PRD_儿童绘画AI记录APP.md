<!--
 * @Author: liuhf21 liuhf21@mails.tsinghua.edu.cn
 * @Date: 2025-09-14 19:36:56
 * @LastEditors: liuhf21 liuhf21@mails.tsinghua.edu.cn
 * @LastEditTime: 2025-09-15 18:36:23
 * @FilePath: /huabanweb/develop.md
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
# 产品需求文档（PRD）- 画伴 APP

## 产品概述

画伴是一款面向儿童及其家长的 AI 画作记录与动画生成应用（Web/PWA）。通过拍摄孩子的画面并调用视频生成模型，让静态画作“动起来”，持续激发孩子的创作热情；同时将所有作品沉淀为可滑动的“成长画册”，并基于绘画教学理论和绘画心理学对作品进行分析，帮助家长理解孩子在绘画方面的特点与能力分布。

- 定位：儿童创作记录 + 故事动画生成 + 成长洞察
- 目标用户：3-10 岁儿童的家长与孩子
- 核心价值：
  - 让画“会动”：把孩子的故事转为动画，提升表达与成就感
  - 可视化成长：以画册形式沉淀作品与动画，形成成长轨迹
  - AI 解读：结合绘画教学理论与绘画心理学，输出能力画像与建议
- 主要问题：
  - 家庭记录难以持续、内容零散；孩子缺乏持续创作动力
  - 家长“看不懂”孩子的画，难以给出恰当反馈与陪伴
- 设计风格：浅色系、温柔、可爱；参照提供的 Figma 参考图进行落地
- 技术栈：React + TypeScript + TailwindCSS + shadcn/ui

---

## 页面功能详述

### 1. 开屏页（SplashScreen）

#### 页面功能
品牌展示、冷启动引导，进入首页（画廊）。

#### UI布局
- 背景：柔和浅色渐变背景
- Logo区：画面中上方，展示 Logo 与中文名“画伴”
- 标语：底部一行文案“让孩子画笔下的故事‘活’起来，让记录变成亲子关系的一部分。”

#### 交互逻辑
- 自动进入：冷启动后短暂展示（建议 1.0-2.0s）自动跳转至“画廊”
- 点击跳过：任意点击可立即进入“画廊”
- Tab：不展示底部 Tab

---

### 2. 画廊页面（GalleryPage）

#### 页面功能
展示孩子的作品与对应动画的“成长画册”，提供作品详情入口与底部导航。

#### UI布局
- 顶部栏：半透明置顶栏；左侧三杠为静态占位（预留筛选）；中部标题“画廊”
- 画册组件：`CircularGallery` 正方形组件（340px），可拖拽/滚动；整体以自上而下的圆弧形态滚动
- 底部导航：三项 Tab（“画廊”高亮、“上传”、“成长”）

#### 交互逻辑
- 滑动/拖拽：滚动浏览画册，具备“卡片吸附/缓动”手感
- 点击作品：进入“画作详情页（ArtworkDetailPage）”
- 首屏加载：异步拉取最新作品列表并渲染 CircularGallery

---

### 3. 画作详情页（ArtworkDetailPage）

#### 页面功能
展示单个作品的动态画面（视频）与文本信息，可播放录音，并引导去 AI 分析。

#### UI布局
- 顶部栏：左“返回”、右“编辑”按钮
- 作品卡：居中卡片宽度 320px，播放生成的动态视频
- 文本区：下方展示作品标题、段落式描述，以及“播放录音”按钮
- 引导文案：页面底部“下滑查看 AI 画面分析”
- Tab：不展示底部 Tab

#### 交互逻辑
- 播放录音：点击后播放本作品的录音描述
- 下滑手势：下滑进入“AI 分析页面”
- 编辑入口：点击“编辑”后可调整标题/描述（占位，后续迭代）

---

### 4. AI 分析页面（AIAnalysisPage）

#### 页面功能
呈现 AI 对画面的可视化与文字分析，并基于分析推荐相关内容（瀑布流广告位）。

#### UI布局
- 顶部栏：左上返回按钮
- 缩略图：页面最上方展示当前画作缩略图
- 分析区：缩略图下方为带长方形框选的分析标注与详细文字说明（结构化分点）
- 推荐区：基于分析结果的瀑布流推荐卡片（广告/内容位）

#### 交互逻辑
- 返回：点击返回回到“画作详情页”
- 滚动加载：推荐区支持懒加载/分页
- 点击推荐：跳转外链或内嵌详情（需开启受控 WebView/新窗口）

---

### 5. 上传/相机页面（CameraPage）

#### 页面功能
获取摄像头权限，提供实时预览、拍照、从相册选取与前后摄像头切换；作为“上传”主入口。

#### UI布局
- 权限提示：首次进入弹框或页内提示获取摄像头权限，失败态支持重试
- 预览区：实时预览（前置镜像）
- 操作区：居中大号拍照按钮；左侧“从相册选取”；右侧“前/后摄像头切换”
- 底部导航：三项 Tab（“画廊”高亮、“上传”、“成长”）

#### 交互逻辑
- 首次权限：请求摄像头权限；拒绝后展示引导与“再次尝试”
- 拍照：完成拍照后进入“描述画面页面（DescriptionPage）”
- 相册选取：从系统相册选择图片后进入“描述画面页面”
- 切换摄像头：在前/后摄像头间切换并更新预览

---

### 6. 描述画面页面（DescriptionPage）

#### 页面功能
采集家长/孩子对画面的口述描述，为后续动画生成与 AI 分析提供语义信息。

#### UI布局
- 顶部标题："描述画面"
- 步进指示：3 步（1 扫描画面、2 描述画面内容、3 生成动态画面）
- 视觉占位：中部展示亲子共绘的 SVG 正方形插图
- 录音按钮：居中圆形按钮，点击切换录音状态并展示动效/文案
- 操作按钮：底部“下一步”按钮；录音完成前为灰态禁用，结束后变为可点击蓝色
- 底部导航：三项 Tab（“画廊”高亮、“上传”、“成长”）

#### 交互逻辑
- 权限申请：首次录音需获取麦克风权限；拒绝后给出开启指引
- 录音切换：点击开始/结束录音；展示录音时长与动效
- 状态校验：录音结束后“下一步”按钮解锁
- 下一步：进入“生成画面页面（GenerationPage）”

---

### 7. 生成画面页面（GenerationPage）

#### 页面功能
提交素材至视频生成模型并反馈进度；中部小游戏为占位（当前不实现交互）。

#### UI布局
- 顶部标题："生成画面"
- 小游戏占位：中部展示“点击屏幕任意位置开始玩”的占位文案与示意图
- 进度反馈：底部进度条与进度文字说明（排队/生成/合成等阶段）

#### 交互逻辑
- 小游戏：点击仅展示占位提示（无实际游戏交互）
- 生成完成：跳转至“动态画面详情”（进入“画作详情页”，视频与文本内容来自本次分析生成）
- 失败重试：生成失败时给出错误提示与“重试/返回”选项

---

### 8. 成长页面（GrowPage）

#### 页面功能
展示儿童画像（头像/昵称/年龄/描述）、能力可视化与成长周报，体现长期成长轨迹。

#### UI布局
- 头像与基本信息：展示头像、昵称（默认“小苹果”）、年龄（“5” 岁）
- 个性描述：单独一行加大展示（如“好奇心满满的科学家”）
- 画面能力：盒状容器内展示六边形能力图；五个角为“故事力 / 想象力 / 情感表达 / 逻辑结构 / 观察力”；第六角位保留扩展（待产品确认）
- 画面周报：展示表达/能力发展图与科学建议（结合近期上传作品与 AI 分析）
- 底部导航：三项 Tab（“画廊”、“上传”、“成长”高亮）

#### 交互逻辑
- 切换周期：周报支持切换“本周/近两周/近一月”（后续迭代）
- 查看建议：点击建议可展开详细说明与对应作品示例
- 刷新：下拉刷新最新周报数据

---

## 全局交互说明

### 导航结构
- 底部 Tab：仅在 Gallery/Camera/Description/Generation/Grow 页面展示；在 Splash、ArtworkDetail、AIAnalysis 页面隐藏
- 高亮规则：当前所在页面对应 Tab 高亮（现状以“画廊”高亮为主，后续对齐交互预期可调整）
- 返回行为：详情与分析页面使用顶部返回，回到来源页面

### 权限与隐私
- 摄像头与麦克风：首次使用分别请求权限；拒绝后在页面内提供开启指引与重试入口
- 本地与上传：拍照/相册图片与录音仅用于生成与分析；对未成年人隐私信息做脱敏与最小化收集
- 广告合规：推荐位遵循未成年人保护相关规范，避免不当内容与强刺激设计

### 生成流程
- 标准链路：Camera 取图/相册选取 → Description 录音 → Generation 进度 → ArtworkDetail 回看 → 下滑至 AIAnalysis 深读
- 进度反馈：分阶段提示；失败态提供重试与返回入口
- 异步完成：生成完成后允许消息通知或页面内提示（后续迭代）
---

## 产品特色

1. **动画即反馈**：将孩子的静态画作快速“活化”为动画，正向激励持续创作
2. **成长画册**：CircularGallery 以更具仪式感的方式沉淀与回看成长轨迹
3. **AI 专业解读**：结合绘画教学理论与绘画心理学，输出能力画像与家庭可执行建议
4. **亲子共创**：录音描述参与生成过程，让家长与孩子共同讲述与创作
5. **轻柔亲和的设计**：浅色系、温柔可爱，细腻动效与过渡，降低使用门槛、提升儿童友好度
